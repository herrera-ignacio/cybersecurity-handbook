"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2292],{4562:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>a});var r=n(5893),i=n(1151);const t={},o="CORB - Cross-Origin Read Blocking",c={id:"networking/specs/corb/README",title:"CORB - Cross-Origin Read Blocking",description:"CORB is an algorithm by which dubious cross-origin resource loads may be identified and blocked by web browsers before they reach the web page.",source:"@site/docs/networking/specs/corb/README.md",sourceDirName:"networking/specs/corb",slug:"/networking/specs/corb/",permalink:"/cybersecurity-handbook/networking/specs/corb/",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Cookies",permalink:"/cybersecurity-handbook/networking/specs/cookies/"},next:{title:"CORS - Cross-Origin Resource Sharing",permalink:"/cybersecurity-handbook/networking/specs/cors/"}},l={},a=[{value:"The Problem",id:"the-problem",level:2},{value:"Which attackes does CORB mitigate?",id:"which-attackes-does-corb-mitigate",level:2},{value:"Cross-Site Script Inclusion (XSSI)",id:"cross-site-script-inclusion-xssi",level:4},{value:"Speculative Side Channel Attack (e.g. Spectre)",id:"speculative-side-channel-attack-eg-spectre",level:4},{value:"How does CORB &quot;block&quot; a response?",id:"how-does-corb-block-a-response",level:2},{value:"Types of content protected by CORB",id:"types-of-content-protected-by-corb",level:2},{value:"How CORB determines wether a response is CORB-protected?",id:"how-corb-determines-wether-a-response-is-corb-protected",level:2}];function d(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h4:"h4",li:"li",p:"p",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{id:"corb---cross-origin-read-blocking",children:"CORB - Cross-Origin Read Blocking"}),"\n",(0,r.jsx)(s.p,{children:"CORB is an algorithm by which dubious cross-origin resource loads may be identified and blocked by web browsers before they reach the web page."}),"\n",(0,r.jsx)(s.p,{children:"CORB reduces the risk of leaking sensitive data by keping it further from cross-origin web pages. In most browsers, it keeps such data out of untrusted script execution contets."}),"\n",(0,r.jsxs)(s.p,{children:["In browsers with ",(0,r.jsx)(s.em,{children:"Site Isolation"}),", it can keep such data out of untrusted renderer processes entirely, helping even against side channel attacks."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"https://chromium.googlesource.com/chromium/src/+/master/services/network/cross_origin_read_blocking_explainer.md",children:"Read More in GoogleSource"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"https://www.youtube.com/watch?v=_5rX6pt0A_k",children:"Great Video Summary from Google Chrome Developers here"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"the-problem",children:"The Problem"}),"\n",(0,r.jsxs)(s.p,{children:["SOP generally prevents one origin from reading arbitrary network resources from another origin. In practice, enforcing this policy is not as simple as blocking all cross-origin loads. Exceptions must be established for web features, like ",(0,r.jsx)(s.code,{children:"<img>"})," or ",(0,r.jsx)(s.code,{children:"<script>"})," which can target cross-origin resources for historical reasons, and for the CORS mechanism which allows some resources to be selectively read across origins."]}),"\n",(0,r.jsxs)(s.p,{children:["Certain types of content, however, can be shown to be incompatible wih al of the historically-allowed permissive contexts. JSON is one such type. A JSON response will result in a decode error when targeted by the ",(0,r.jsx)(s.code,{children:"<img>"})," tag, either a no-op or syntax error when targeted by the ",(0,r.jsx)(s.code,{children:"<script>"})," tag, and so on. The only case where a web page can load JSON with oserable consequences is via ",(0,r.jsx)(s.code,{children:"fetch()"})," or ",(0,r.jsx)(s.code,{children:"XMLHttpRequest"})," which are moderated by CORS."]}),"\n",(0,r.jsx)(s.p,{children:"By detecting and blocking loads of CORB-protected resource early (before response makes it to the image decoder or JavaSript parser stage), CORB defends against side hannel vulnerabilities that may be present in the stages which are skipped."}),"\n",(0,r.jsx)(s.h2,{id:"which-attackes-does-corb-mitigate",children:"Which attackes does CORB mitigate?"}),"\n",(0,r.jsx)(s.h4,{id:"cross-site-script-inclusion-xssi",children:"Cross-Site Script Inclusion (XSSI)"}),"\n",(0,r.jsxs)(s.p,{children:["Pointing the ",(0,r.jsx)(s.code,{children:"<script>"})," tag at a target resource which is not JavaScript, and observing some side effects when the resulting resource is interpreted as JavaScript."]}),"\n",(0,r.jsxs)(s.p,{children:["CORB-protected resourecs will be blocked from ever being delivered to a cross-site ",(0,r.jsx)(s.code,{children:"<script>"})," element."]}),"\n",(0,r.jsxs)(s.p,{children:["CORB is particularly valuable in absence of other XSSI defenses like ",(0,r.jsx)(s.em,{children:"XSRF tokens"})," and/or ",(0,r.jsx)(s.em,{children:"JSON security prefixes"}),", which can also work as a signal to the CORB algorithm that a resource should be CORB-protected."]}),"\n",(0,r.jsx)(s.h4,{id:"speculative-side-channel-attack-eg-spectre",children:"Speculative Side Channel Attack (e.g. Spectre)"}),"\n",(0,r.jsxs)(s.p,{children:["An attacker may use an ",(0,r.jsx)(s.code,{children:'<img src="https://example/secret.json>'})," element to pull a cross-site secret into the proces where the attacker's JavaScript runs, and then use a speculative side hanel attack to read the secret."]}),"\n",(0,r.jsxs)(s.p,{children:["CORB can prevent this class of attacks when usd in tandem with ",(0,r.jsx)(s.em,{children:"Site Isolation"}),", by preventign the JSON resourec from bein present in the memory of a process hosting a cross-site page."]}),"\n",(0,r.jsx)(s.h2,{id:"how-does-corb-block-a-response",children:'How does CORB "block" a response?'}),"\n",(0,r.jsx)(s.p,{children:"When CORB decides that a response needs to be CORB-protected, it is modified as follows:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Response body is replaced wih an empty body."}),"\n",(0,r.jsx)(s.li,{children:"Response headers are reomved."}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"types-of-content-protected-by-corb",children:"Types of content protected by CORB"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"JSON"}),"\n",(0,r.jsx)(s.li,{children:"HTML"}),"\n",(0,r.jsx)(s.li,{children:"XML"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"how-corb-determines-wether-a-response-is-corb-protected",children:"How CORB determines wether a response is CORB-protected?"}),"\n",(0,r.jsx)(s.p,{children:"CORB decides whether a response needs protectino (i.e. if a response is JSON, HTML or XML resource) based on the following:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["If the response contains ",(0,r.jsx)(s.code,{children:"X-Content-Type-Options: nosniff"})," response header, then the response will be CORB-protected if its ",(0,r.jsx)(s.code,{children:"Content-Type"})," header is one of the following","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"HTML MIME Type"}),"\n",(0,r.jsx)(s.li,{children:"JSON MIME Type"}),"\n",(0,r.jsxs)(s.li,{children:["XML MIME Type (except ",(0,r.jsx)(s.code,{children:"image/svg+xml"}),")"]}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"text/plain"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["If response is a 206 response and if its ",(0,r.jsx)(s.code,{children:"Content-Type"})," header is one of the following:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"HTML MIME Type"}),"\n",(0,r.jsx)(s.li,{children:"JSON MIME Type"}),"\n",(0,r.jsxs)(s.li,{children:["XML MIME Type (except ",(0,r.jsx)(s.code,{children:"image/svg+xml"}),")"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["Otherwise CORB attempts to sniff the response body:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["MIME Type that sniffs as HTML, JSON or XML (except ",(0,r.jsx)(s.code,{children:"image/svg+xml"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"text/plain"})," that sniffs to JSON, HTLM, or XML"]}),"\n",(0,r.jsxs)(s.li,{children:["Any response (except ",(0,r.jsx)(s.code,{children:"text/css"}),") that begins with a JSON security prefix"]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>c,a:()=>o});var r=n(7294);const i={},t=r.createContext(i);function o(e){const s=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);