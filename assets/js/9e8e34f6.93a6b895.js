"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6349],{9913:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>a,toc:()=>c});var r=i(5893),s=i(1151);const t={},o="Active subdomain enumeration",a={id:"information_gathering/active_subdomain_enumeration/README",title:"Active subdomain enumeration",description:"Overview",source:"@site/docs/information_gathering/active_subdomain_enumeration/README.md",sourceDirName:"information_gathering/active_subdomain_enumeration",slug:"/information_gathering/active_subdomain_enumeration/",permalink:"/cybersecurity-handbook/information_gathering/active_subdomain_enumeration/",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Active Infrastructure Identification",permalink:"/cybersecurity-handbook/information_gathering/active_infrastructure_identification/"},next:{title:"Web Crawling",permalink:"/cybersecurity-handbook/information_gathering/crawling/"}},d={},c=[{value:"Overview",id:"overview",level:2},{value:"Using authority",id:"using-authority",level:2},{value:"Using zone transfers",id:"using-zone-transfers",level:2},{value:"Identifying nameservers",id:"identifying-nameservers",level:3},{value:"Testing for ANY and AXFR Zone Transfer",id:"testing-for-any-and-axfr-zone-transfer",level:3},{value:"Gobuster",id:"gobuster",level:2},{value:"sublist3r",id:"sublist3r",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"active-subdomain-enumeration",children:"Active subdomain enumeration"}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"We can perform active subdomain enumeration probing the infrastructure managed by the target organization or 3rd party DNS servers we have previously identified."}),"\n",(0,r.jsx)(n.p,{children:"::: warning\nThe amount of traffic generated can lead to the detection of our reconnaissance activities.\n:::"}),"\n",(0,r.jsx)(n.h2,{id:"using-authority",children:"Using authority"}),"\n",(0,r.jsx)(n.p,{children:'Find subdomains by using the authority. First, do a lookup to see if they have an "authority" section:'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-console",children:"$ dig wikipedia.com\n\n;; AUTHORITY SECTION:\nwikipedia.com.        163475    IN    NS    ns2.wikimedia.org.\nwikipedia.com.        163475    IN    NS    ns1.wikimedia.org.\nwikipedia.com.        163475    IN    NS    ns0.wikimedia.org.\n"})}),"\n",(0,r.jsx)(n.p,{children:"Then, using the authority results:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-console",children:"dig @ns1.wikimedia.org wikipedia.com axfr\n"})}),"\n",(0,r.jsx)(n.h2,{id:"using-zone-transfers",children:"Using zone transfers"}),"\n",(0,r.jsx)(n.p,{children:"Zone transfer is how a secondary DNS server receives information from the primary DNS server and updates it (i.e., AXFR DNS query type is used to replicate DNS records from a primery DNS server to a secondary one)."}),"\n",(0,r.jsx)(n.p,{children:"The master DNS server should be configured to enable zone transfers from secondary (slave) DNS servers, although this might be misconfigured."}),"\n",(0,r.jsxs)(n.p,{children:["An example tool: ",(0,r.jsx)(n.a,{href:"https://hackertarget.com/zone-transfer/"}),"."]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"If we perform a successful zone transfer for a domain, there's no need to continue enumerating this particular domain as this will extract all the available information."})}),"\n",(0,r.jsx)(n.p,{children:"A manual approach will be:"}),"\n",(0,r.jsx)(n.h3,{id:"identifying-nameservers",children:"Identifying nameservers"}),"\n",(0,r.jsxs)(n.p,{children:["You'd use the command ",(0,r.jsx)(n.code,{children:"nslookup -type=NS <TARGET> [<TARGET_IP>]"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-console",children:"$ nslookup -type=NS zonetransfer.me\n\nServer:\t\t10.100.0.1\nAddress:\t10.100.0.1#53\n\nNon-authoritative answer:\nzonetransfer.me\tnameserver = nsztm2.digi.ninja.\nzonetransfer.me\tnameserver = nsztm1.digi.ninja.\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Alternatively, using ",(0,r.jsx)(n.code,{children:"dig"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-console",children:"$ dig +short ns zonetransfer.me\n\nnsztm1.digi.ninja.\nnsztm2.digi.ninja.\n"})}),"\n",(0,r.jsx)(n.h3,{id:"testing-for-any-and-axfr-zone-transfer",children:"Testing for ANY and AXFR Zone Transfer"}),"\n",(0,r.jsxs)(n.p,{children:["Using ",(0,r.jsx)(n.code,{children:"nslookup"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-console",children:"nslookup -type=any -query=AXFR <TARGET> <NS>\nnslookup -type=any -query=AXFR zonetransfer.me nsztm1.digi.ninja\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Alternatively, using ",(0,r.jsx)(n.code,{children:"dig"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-console",children:"dig axfr <TARGET> @<NS>\ndig axfr zonetransfer.me @nsztm1.digi.ninja.\n"})}),"\n",(0,r.jsx)(n.h2,{id:"gobuster",children:"Gobuster"}),"\n",(0,r.jsxs)(n.p,{children:["Gobuster is a tool that can be used to perform subdomain enumeration. You can use a wordlist from ",(0,r.jsx)(n.em,{children:"Seclists"})," repository if you're looking for words in patterns."]}),"\n",(0,r.jsxs)(n.p,{children:["First, create a ",(0,r.jsx)(n.code,{children:"patterns.txt"})," file, for example:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"lert-api-shv-{GOBUSTER}-sin6\natlas-pp-shv-{GOBUSTER}-sin6\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Then, using the ",(0,r.jsx)(n.code,{children:"dns"})," module, specify the following options:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"dns"}),": Launch the DNS module."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-q"}),": Don't print the banner and other noise."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-r"}),": Use custom DNS server."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-d"}),": A target domain name."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-p"}),": Path to the patterns file."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-w"}),": Path to the wordlist."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-o"}),": Output file."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-console",children:'export TARGET="facebook.com"\nexport NS="d.ns.facebook.com"\nexport WORDLIST="numbers.txt"\ngobuster dns -q -r "${NS}" -d "${TARGET}" -w "${WORDLIST}" -p ./patterns.txt -o "gobuster_${TARGET}.txt"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"sublist3r",children:"sublist3r"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://github.com/aboul3la/Sublist3r",children:"sublist3r"})," is a tool to enumerate subdomains of websites using OSINT."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-console",children:"sublist3r -d <DOMAIN>\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>a,a:()=>o});var r=i(7294);const s={},t=r.createContext(s);function o(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);