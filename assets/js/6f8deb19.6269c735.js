"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1872],{9846:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>a,toc:()=>h});var t=s(5893),i=s(1151);const r={},o="Virtual hosts",a={id:"information_gathering/virtual_hosts/README",title:"Virtual hosts",description:"Overview",source:"@site/docs/information_gathering/virtual_hosts/README.md",sourceDirName:"information_gathering/virtual_hosts",slug:"/information_gathering/virtual_hosts/",permalink:"/cybersecurity-handbook/information_gathering/virtual_hosts/",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Passive Subdomain Enumeration",permalink:"/cybersecurity-handbook/information_gathering/passive_subdomain_enumeration/"},next:{title:"WHOIS",permalink:"/cybersecurity-handbook/information_gathering/whois/"}},l={},h=[{value:"Overview",id:"overview",level:2},{value:"IP-based virtual hoisting",id:"ip-based-virtual-hoisting",level:3},{value:"Name-based virtual hoisting",id:"name-based-virtual-hoisting",level:3},{value:"vHost manual fuzzing",id:"vhost-manual-fuzzing",level:2},{value:"Automating vHosts discovering",id:"automating-vhosts-discovering",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"virtual-hosts",children:"Virtual hosts"}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.em,{children:"virtual host"})," (",(0,t.jsx)(n.code,{children:"vHost"}),") is a feature that allows several websites to be hosted on a single server. There are two ways to configure virtual hosts:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"IP"}),"-based virtual hosting (",(0,t.jsx)(n.em,{children:"network level"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Name"}),"-based virtual hoisting (",(0,t.jsx)(n.em,{children:"application level"}),")."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"ip-based-virtual-hoisting",children:"IP-based virtual hoisting"}),"\n",(0,t.jsx)(n.p,{children:"A host can have multiple network interfaces. Multiple IP addresses, or interface alias, can be configured on each network interface of a host. The servers or virtual servers running on the host can bind to one or more IP addresses."}),"\n",(0,t.jsx)(n.p,{children:"This means that different servers can be addressed under different IP addresses on this host. From the client's point of view, the servers are independent of each other."}),"\n",(0,t.jsx)(n.h3,{id:"name-based-virtual-hoisting",children:"Name-based virtual hoisting"}),"\n",(0,t.jsxs)(n.p,{children:["The distinction for which domain service was requested is made at the ",(0,t.jsx)(n.strong,{children:"application level"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"For example, several domain names can refer to the same IP. Internally on the server, these are separated."}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"During our subdomain discovering activities, we might see some subdomains having the same IP address that can either be virtual hosts or, in some cases, different servers sitting behind a proxy."})}),"\n",(0,t.jsx)(n.h2,{id:"vhost-manual-fuzzing",children:"vHost manual fuzzing"}),"\n",(0,t.jsxs)(n.p,{children:["We can use a wordlistr of possible vhost names (e.g., ",(0,t.jsx)(n.code,{children:"/opt/useful/SecLists/Discovery/DNS/namelist.txt"}),") and examining the Content-Length header to look for any differences."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-console",children:'cat ./vhosts | while read vhost; do echo "\\n********\\nFUZZING: ${vhost}\\n********"; curl -s -I http://192.168.10.10 -H "HOST: ${vhost}.randomtarget.com" | grep "Content-Length: "; done\n'})}),"\n",(0,t.jsx)(n.h2,{id:"automating-vhosts-discovering",children:"Automating vHosts discovering"}),"\n",(0,t.jsxs)(n.p,{children:["Using ",(0,t.jsx)(n.a,{href:"https://github.com/ffuf/ffuf",children:"ffuf"}),", we can speed up the process of discovering vHosts and filter based on parameters present in the response."]}),"\n",(0,t.jsxs)(n.p,{children:["For example, use the ",(0,t.jsx)(n.code,{children:"-fs"})," option to filter by size (i.e., discard the default response size)."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-console",children:'ffuf -w ./vhosts -u http://192.168.10.10 -H "HOST: FUZZ.randomtarget.com" -fs 612\n'})})]})}function c(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>o});var t=s(7294);const i={},r=t.createContext(i);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);